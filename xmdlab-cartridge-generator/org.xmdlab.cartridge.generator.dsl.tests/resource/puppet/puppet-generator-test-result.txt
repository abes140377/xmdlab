MULTIPLE FILES WERE GENERATED

File 1 : /myProject/null/de/freund/xgen/cartridge/generator/PuppetCartridgeGenerator.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.generator.CartridgeGeneratorXtendTpl
 */
package de.freund.xgen.cartridge.generator

/**
 * The PuppetCartridgeGeneratorStandaloneSetup
 *
 * @author Sebastian Freund<seba1403@googlemail.com>
 *
 */
class PuppetCartridgeGenerator extends PuppetCartridgeGeneratorBase {

}

File 2 : /myProject/null/de/freund/xgen/cartridge/metafacade/ModelMetafacadeImpl.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.metafacade.CartridgeMetafacadeImplXtendTpl
 */
package de.freund.xgen.cartridge.metafacade


class ModelMetafacadeImpl extends ModelMetafacadeBase {

}

File 3 : /myProject/null/de/freund/xgen/cartridge/metafacade/NodeMetafacadeImpl.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.metafacade.CartridgeMetafacadeImplXtendTpl
 */
package de.freund.xgen.cartridge.metafacade


class NodeMetafacadeImpl extends NodeMetafacadeBase {

}

File 4 : /myProject/null/de/freund/xgen/cartridge/metafacade/ProfileMetafacadeImpl.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.metafacade.CartridgeMetafacadeImplXtendTpl
 */
package de.freund.xgen.cartridge.metafacade


class ProfileMetafacadeImpl extends ProfileMetafacadeBase {

}

File 5 : /myProject/null/de/freund/xgen/cartridge/templates/ProfileBaseTpl.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.templates.TemplateTpl
 */
package de.freund.xgen.cartridge.templates

import com.google.inject.Inject
import de.freund.xgen.cartridge.metafacade.*
import de.freund.xgen.cartridge.util.PuppetCartridgeProjectProperties

class ProfileBaseTpl extends ProfileBaseTplBase {
	
	@Inject extension PuppetCartridgeProjectProperties p
	
	override doGenerate(ProfileMetafacade profileMetafacade) '''
	
	'''
}

File 6 : /myProject/null/de/freund/xgen/cartridge/templates/ProfileTpl.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.templates.TemplateTpl
 */
package de.freund.xgen.cartridge.templates

import com.google.inject.Inject
import de.freund.xgen.cartridge.metafacade.*
import de.freund.xgen.cartridge.util.PuppetCartridgeProjectProperties

class ProfileTpl extends ProfileTplBase {
	
	@Inject extension PuppetCartridgeProjectProperties p
	
	override doGenerate(ProfileMetafacade profileMetafacade) '''
	
	'''
}

File 7 : /myProject/null/de/freund/xgen/cartridge/templates/ReadmeMdTpl.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.templates.TemplateTpl
 */
package de.freund.xgen.cartridge.templates

import com.google.inject.Inject
import de.freund.xgen.cartridge.metafacade.*
import de.freund.xgen.cartridge.util.PuppetCartridgeProjectProperties

class ReadmeMdTpl extends ReadmeMdTplBase {
	
	@Inject extension PuppetCartridgeProjectProperties p
	
	override doGenerate(NodeMetafacade nodeMetafacade) '''
	
	'''
}

File 8 : /myProject/null/de/freund/xgen/cartridge/templates/RoleBaseTpl.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.templates.TemplateTpl
 */
package de.freund.xgen.cartridge.templates

import com.google.inject.Inject
import de.freund.xgen.cartridge.metafacade.*
import de.freund.xgen.cartridge.util.PuppetCartridgeProjectProperties

class RoleBaseTpl extends RoleBaseTplBase {
	
	@Inject extension PuppetCartridgeProjectProperties p
	
	override doGenerate(NodeMetafacade nodeMetafacade) '''
	
	'''
}

File 9 : /myProject/null/de/freund/xgen/cartridge/templates/RoleTpl.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.templates.TemplateTpl
 */
package de.freund.xgen.cartridge.templates

import com.google.inject.Inject
import de.freund.xgen.cartridge.metafacade.*
import de.freund.xgen.cartridge.util.PuppetCartridgeProjectProperties

class RoleTpl extends RoleTplBase {
	
	@Inject extension PuppetCartridgeProjectProperties p
	
	override doGenerate(NodeMetafacade nodeMetafacade) '''
	
	'''
}

File 10 : /myProject/null/de/freund/xgen/cartridge/templates/SitePpTpl.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.templates.TemplateTpl
 */
package de.freund.xgen.cartridge.templates

import com.google.inject.Inject
import de.freund.xgen.cartridge.metafacade.*
import de.freund.xgen.cartridge.util.PuppetCartridgeProjectProperties

class SitePpTpl extends SitePpTplBase {
	
	@Inject extension PuppetCartridgeProjectProperties p
	
	override doGenerate(NodeMetafacade nodeMetafacade) '''
	
	'''
}

File 11 : /myProject/null/de/freund/xgen/cartridge/templates/VagrantfileTpl.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.templates.TemplateTpl
 */
package de.freund.xgen.cartridge.templates

import com.google.inject.Inject
import de.freund.xgen.cartridge.metafacade.*
import de.freund.xgen.cartridge.util.PuppetCartridgeProjectProperties

class VagrantfileTpl extends VagrantfileTplBase {
	
	@Inject extension PuppetCartridgeProjectProperties p
	
	override doGenerate(NodeMetafacade nodeMetafacade) '''
	
	'''
}

File 12 : /myProject/src-gen/de/freund/xgen/cartridge/PuppetCartridgeGeneratorModule.java

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.generator.CartridgeGeneratorModuleTpl
 */
package de.freund.xgen.cartridge;

import org.eclipse.xtext.generator.IOutputConfigurationProvider;
//import org.eclipse.xtext.generator.JavaIoFileSystemAccess;
import org.eclipse.xtext.service.AbstractGenericModule;

import com.google.inject.Binder;

import de.freund.xgen.cartridge.util.PuppetCartridgeOutputConfigurationProvider;

import de.freund.xgen.cartridge.metafacade.*;
import de.freund.xgen.cartridge.generator.*;

/**
 * The PuppetCartridgeGeneratorModule
 *
 * @author Sebastian Freund<seba1403@googlemail.com>
 *
 */
public class PuppetCartridgeGeneratorModule extends AbstractGenericModule {

	@Override
	public void configure(Binder binder) {
		super.configure(binder);
	}

	public Class<? extends org.eclipse.xtext.generator.IGenerator> bindIGenerator() {
		return PuppetCartridgeGenerator.class;
	}

	public Class<? extends IOutputConfigurationProvider> bindIOutputConfigurationProvider() {
		return PuppetCartridgeOutputConfigurationProvider.class;
	}
	
	public Class<? extends ModelMetafacade> bindModelMetafacade() {
		return ModelMetafacadeImpl.class;
	}
	public Class<? extends NodeMetafacade> bindNodeMetafacade() {
		return NodeMetafacadeImpl.class;
	}
	public Class<? extends ProfileMetafacade> bindProfileMetafacade() {
		return ProfileMetafacadeImpl.class;
	}

	// public Class<? extends JavaIoFileSystemAccess> bindJavaIoFileSystemAccess() {
	//	return de.freund.xgen.xtext.core.fsa.JavaIoFileSystemAccessExt.class;
	// }
}

File 13 : /myProject/src-gen/de/freund/xgen/cartridge/PuppetCartridgeGeneratorStandaloneSetup.java

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.generator.CartridgeGeneratorStandaloneSetupTpl
 */
package de.freund.xgen.cartridge;

import org.eclipse.xtext.util.Modules2;

import com.google.inject.Guice;
import com.google.inject.Injector;

/**
 * The PuppetCartridgeGeneratorStandaloneSetup
 *
 * @author Sebastian Freund<seba1403@googlemail.com>
 *
 */
public class PuppetCartridgeGeneratorStandaloneSetup extends org.xmdlab.dsl.puppet.PuppetDslStandaloneSetup {

	public static void doSetup() {
		new PuppetCartridgeGeneratorStandaloneSetup().createInjectorAndDoEMFRegistration();
	}
	
	@Override
	public Injector createInjector() {
		// Reihenfolge ist entscheidend, PuppetCartridgeGeneratorModule
		// muss nach DomainmodelRuntimeModule kommen
		return Guice.createInjector(Modules2.mixin(
			new org.xmdlab.dsl.puppet.PuppetDslRuntimeModule(),
			new PuppetCartridgeGeneratorModule()));
			//new de.freund.xgen.xtext.core.CartridgeGeneratorCoreModule()
	}
}

File 14 : /myProject/src-gen/de/freund/xgen/cartridge/generator/PuppetCartridgeGenerator.mwe2

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.generator.CartridgGeneratorMwe2Tpl
 */
module de.freund.xgen.cartridge.generator.PuppetCartridgeGenerator

import org.eclipse.emf.mwe.utils.*

var modelPath

var siteBaseDir
var manifestsDir
var roleManifestsDir
var profileManifestsDir

/**
*
*/
Workflow {
	// print welcome message
	component = org.xmdlab.cartride.common.workflow.WelcomeMessage {
		cartridge = "Puppet Cartridge"
	}
	
	// read model file
	component = org.eclipse.xtext.mwe.Reader {
		path = modelPath
		// this class will be generated by the xtext generator
		register = de.freund.xgen.cartridge.PuppetCartridgeGeneratorStandaloneSetup {}
		loadResource = {
			slot = "model"
		}
	}
	
	// no transformation required
	
	// init metafacades
	
	// run generator
	component = org.eclipse.xtext.generator.GeneratorComponent {
		register = de.freund.xgen.cartridge.PuppetCartridgeGeneratorStandaloneSetup {}
		
		slot = 'model'
		
		outlet = {
			outletName = "siteBase"
			path = siteBaseDir
		}
		outlet = {
			outletName = "manifests"
			path = manifestsDir
		}
		outlet = {
			outletName = "roleManifests"
			path = roleManifestsDir
		}
		outlet = {
			outletName = "profileManifests"
			path = profileManifestsDir
		}
	}
}

File 15 : /myProject/src-gen/de/freund/xgen/cartridge/generator/PuppetCartridgeGeneratorBase.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.generator.CartridgeGeneratorBaseXtendTpl
 */
package de.freund.xgen.cartridge.generator

import com.google.inject.Inject
import com.google.inject.Provider
import static de.freund.xgen.cartridge.util.PuppetCartridgeOutputConfigurationProvider.*
import org.eclipse.xtext.generator.IFileSystemAccess
import org.eclipse.xtext.generator.IGenerator
//import org.eclipse.xtext.naming.IQualifiedNameProvider
import org.eclipse.emf.ecore.resource.Resource

import de.freund.xgen.cartridge.util.PuppetCartridgeProjectProperties

import de.freund.xgen.cartridge.metafacade.*

import de.freund.xgen.cartridge.templates.ReadmeMdTpl
import de.freund.xgen.cartridge.templates.VagrantfileTpl
import de.freund.xgen.cartridge.templates.SitePpTpl
import de.freund.xgen.cartridge.templates.RoleBaseTpl
import de.freund.xgen.cartridge.templates.RoleTpl
import de.freund.xgen.cartridge.templates.ProfileBaseTpl
import de.freund.xgen.cartridge.templates.ProfileTpl

/**
 * The PuppetCartridgeGeneratorBase
 *
 * @author Sebastian Freund<seba1403@googlemail.com>
 *
 */
abstract class PuppetCartridgeGeneratorBase implements IGenerator {

	// @Inject extension IQualifiedNameProvider nameProvider
	@Inject PuppetCartridgeProjectProperties properties

	@Inject Provider<ReadmeMdTpl> readmeMdTpl
	@Inject Provider<VagrantfileTpl> vagrantfileTpl
	@Inject Provider<SitePpTpl> sitePpTpl
	@Inject Provider<RoleBaseTpl> roleBaseTpl
	@Inject Provider<RoleTpl> roleTpl
	@Inject Provider<ProfileBaseTpl> profileBaseTpl
	@Inject Provider<ProfileTpl> profileTpl
	@Inject ModelMetafacade modelMetafacade
	@Inject NodeMetafacade nodeMetafacade
	@Inject ProfileMetafacade profileMetafacade

	/**
	* This method is a long sequence of calling all templates for the code generation
	*/
	override void doGenerate(Resource resource, IFileSystemAccess fsa) {
		var model = resource.getContents().get(0) as org.xmdlab.dsl.puppet.puppetDsl.DslModel
		modelMetafacade.modelResource = model
		
		// Init properties
		properties.modelUri = resource.URI
		
		// Init metafacades
		nodeMetafacade.modelResource = resource.allContents.filter(typeof(org.xmdlab.dsl.puppet.puppetDsl.DslNode)).head
		profileMetafacade.modelResource = resource.allContents.filter(typeof(org.xmdlab.dsl.puppet.puppetDsl.DslProfile)).head
		
		// compile templates
		beforeCompileReadmeMd(nodeMetafacade)
		compileReadmeMd(nodeMetafacade, fsa)
		afterCompileReadmeMd(nodeMetafacade)
		
		beforeCompileVagrantfile(nodeMetafacade)
		compileVagrantfile(nodeMetafacade, fsa)
		afterCompileVagrantfile(nodeMetafacade)
		
		beforeCompileSitePp(nodeMetafacade)
		compileSitePp(nodeMetafacade, fsa)
		afterCompileSitePp(nodeMetafacade)
		
		beforeCompileRoleBase(nodeMetafacade)
		compileRoleBase(nodeMetafacade, fsa)
		afterCompileRoleBase(nodeMetafacade)
		
		beforeCompileRole(nodeMetafacade)
		compileRole(nodeMetafacade, fsa)
		afterCompileRole(nodeMetafacade)
		
		beforeCompileProfileBase(profileMetafacade)
		compileProfileBase(profileMetafacade, fsa)
		afterCompileProfileBase(profileMetafacade)
		
		beforeCompileProfile(profileMetafacade)
		compileProfile(profileMetafacade, fsa)
		afterCompileProfile(profileMetafacade)
		
	}

	/**
	 *
	 */
	def beforeCompileReadmeMd(NodeMetafacade nodeMetafacade) { }
	
	/**
	 *
	 */
	def compileReadmeMd(NodeMetafacade nodeMetafacade, IFileSystemAccess fsa) {
		val ReadmeMdTpl tpl = readmeMdTpl.get
		
		val String fileName = "README.md"
		
		fsa.generateFile(fileName, OUTPUTCONFIG_SITE_BASE, tpl.generate(nodeMetafacade))
	}
	
	/**
	 *
	 */
	def afterCompileReadmeMd(NodeMetafacade nodeMetafacade) { }
	
	
	/**
	 *
	 */
	def beforeCompileVagrantfile(NodeMetafacade nodeMetafacade) { }
	
	/**
	 *
	 */
	def compileVagrantfile(NodeMetafacade nodeMetafacade, IFileSystemAccess fsa) {
		val VagrantfileTpl tpl = vagrantfileTpl.get
		
		val String fileName = "Vagrantfile"
		
		fsa.generateFile(fileName, OUTPUTCONFIG_SITE_BASE, tpl.generate(nodeMetafacade))
	}
	
	/**
	 *
	 */
	def afterCompileVagrantfile(NodeMetafacade nodeMetafacade) { }
	
	
	/**
	 *
	 */
	def beforeCompileSitePp(NodeMetafacade nodeMetafacade) { }
	
	/**
	 *
	 */
	def compileSitePp(NodeMetafacade nodeMetafacade, IFileSystemAccess fsa) {
		val SitePpTpl tpl = sitePpTpl.get
		
		val String fileName = "site.pp"
		
		fsa.generateFile(fileName, OUTPUTCONFIG_MANIFESTS, tpl.generate(nodeMetafacade))
	}
	
	/**
	 *
	 */
	def afterCompileSitePp(NodeMetafacade nodeMetafacade) { }
	
	
	/**
	 *
	 */
	def beforeCompileRoleBase(NodeMetafacade nodeMetafacade) { }
	
	/**
	 *
	 */
	def compileRoleBase(NodeMetafacade nodeMetafacade, IFileSystemAccess fsa) {
		val RoleBaseTpl tpl = roleBaseTpl.get
		
		val String fileName = "init.pp"
		
		fsa.generateFile(fileName, OUTPUTCONFIG_ROLE_MANIFESTS, tpl.generate(nodeMetafacade))
	}
	
	/**
	 *
	 */
	def afterCompileRoleBase(NodeMetafacade nodeMetafacade) { }
	
	
	/**
	 *
	 */
	def beforeCompileRole(NodeMetafacade nodeMetafacade) { }
	
	/**
	 *
	 */
	def compileRole(NodeMetafacade nodeMetafacade, IFileSystemAccess fsa) {
		val RoleTpl tpl = roleTpl.get
		
		val String fileName = getCompileRoleOutputPattern(nodeMetafacade)
		
		fsa.generateFile(fileName, OUTPUTCONFIG_ROLE_MANIFESTS, tpl.generate(nodeMetafacade))
	}
	
	/**
	 *
	 */
	def afterCompileRole(NodeMetafacade nodeMetafacade) { }
	
	def String getCompileRoleOutputPattern(NodeMetafacade nodeMetafacade)
	
	/**
	 *
	 */
	def beforeCompileProfileBase(ProfileMetafacade profileMetafacade) { }
	
	/**
	 *
	 */
	def compileProfileBase(ProfileMetafacade profileMetafacade, IFileSystemAccess fsa) {
		val ProfileBaseTpl tpl = profileBaseTpl.get
		
		val String fileName = "base.pp"
		
		fsa.generateFile(fileName, OUTPUTCONFIG_PROFILE_MANIFESTS, tpl.generate(profileMetafacade))
	}
	
	/**
	 *
	 */
	def afterCompileProfileBase(ProfileMetafacade profileMetafacade) { }
	
	
	/**
	 *
	 */
	def beforeCompileProfile(ProfileMetafacade profileMetafacade) { }
	
	/**
	 *
	 */
	def compileProfile(ProfileMetafacade profileMetafacade, IFileSystemAccess fsa) {
		val ProfileTpl tpl = profileTpl.get
		
		val String fileName = getCompileProfileOutputPattern(profileMetafacade)
		
		fsa.generateFile(fileName, OUTPUTCONFIG_PROFILE_MANIFESTS, tpl.generate(profileMetafacade))
	}
	
	/**
	 *
	 */
	def afterCompileProfile(ProfileMetafacade profileMetafacade) { }
	
	def String getCompileProfileOutputPattern(ProfileMetafacade profileMetafacade)
	
	
	/**
	 *
	 */
	 def void runTest(ProfileMetafacade profileMetafacade) { }
}

File 16 : /myProject/src-gen/de/freund/xgen/cartridge/metafacade/ModelMetafacade.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.metafacade.CartridgeMetafacadeXtendTpl
 */
package de.freund.xgen.cartridge.metafacade

import org.xmdlab.cartride.common.metafacade.Metafacade

interface ModelMetafacade extends Metafacade<org.xmdlab.dsl.puppet.puppetDsl.DslModel> {
}

File 17 : /myProject/src-gen/de/freund/xgen/cartridge/metafacade/ModelMetafacadeBase.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.metafacade.CartridgeMetafacadeBaseXtendTpl
 */
package de.freund.xgen.cartridge.metafacade

import org.xmdlab.cartride.common.metafacade.MetafacadeBase

abstract class ModelMetafacadeBase extends MetafacadeBase<org.xmdlab.dsl.puppet.puppetDsl.DslModel> implements ModelMetafacade {
	
}

File 18 : /myProject/src-gen/de/freund/xgen/cartridge/metafacade/NodeMetafacade.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.metafacade.CartridgeMetafacadeXtendTpl
 */
package de.freund.xgen.cartridge.metafacade

import org.xmdlab.cartride.common.metafacade.Metafacade

interface NodeMetafacade extends Metafacade<org.xmdlab.dsl.puppet.puppetDsl.DslNode> {
	def java.util.List<org.xmdlab.dsl.puppet.puppetDsl.DslModule> getForgeModules()
	def java.util.List<org.xmdlab.dsl.puppet.puppetDsl.DslModule> getGitModules()
}

File 19 : /myProject/src-gen/de/freund/xgen/cartridge/metafacade/NodeMetafacadeBase.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.metafacade.CartridgeMetafacadeBaseXtendTpl
 */
package de.freund.xgen.cartridge.metafacade

import org.xmdlab.cartride.common.metafacade.MetafacadeBase

abstract class NodeMetafacadeBase extends MetafacadeBase<org.xmdlab.dsl.puppet.puppetDsl.DslNode> implements NodeMetafacade {
	
}

File 20 : /myProject/src-gen/de/freund/xgen/cartridge/metafacade/ProfileMetafacade.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.metafacade.CartridgeMetafacadeXtendTpl
 */
package de.freund.xgen.cartridge.metafacade

import org.xmdlab.cartride.common.metafacade.Metafacade

interface ProfileMetafacade extends Metafacade<org.xmdlab.dsl.puppet.puppetDsl.DslProfile> {
}

File 21 : /myProject/src-gen/de/freund/xgen/cartridge/metafacade/ProfileMetafacadeBase.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.metafacade.CartridgeMetafacadeBaseXtendTpl
 */
package de.freund.xgen.cartridge.metafacade

import org.xmdlab.cartride.common.metafacade.MetafacadeBase

abstract class ProfileMetafacadeBase extends MetafacadeBase<org.xmdlab.dsl.puppet.puppetDsl.DslProfile> implements ProfileMetafacade {
	
}

File 22 : /myProject/src-gen/de/freund/xgen/cartridge/templates/ProfileBaseTplBase.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.templates.TemplateBaseTpl
 */
package de.freund.xgen.cartridge.templates

import de.freund.xgen.cartridge.metafacade.*
		
abstract class ProfileBaseTplBase {
	

	def generate(ProfileMetafacade profileMetafacade) '''
		«doGenerate(profileMetafacade)»
	'''

	def String doGenerate(ProfileMetafacade profileMetafacade)
}

File 23 : /myProject/src-gen/de/freund/xgen/cartridge/templates/ProfileTplBase.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.templates.TemplateBaseTpl
 */
package de.freund.xgen.cartridge.templates

import de.freund.xgen.cartridge.metafacade.*
		
abstract class ProfileTplBase {
	

	def generate(ProfileMetafacade profileMetafacade) '''
		«doGenerate(profileMetafacade)»
	'''

	def String doGenerate(ProfileMetafacade profileMetafacade)
}

File 24 : /myProject/src-gen/de/freund/xgen/cartridge/templates/ReadmeMdTplBase.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.templates.TemplateBaseTpl
 */
package de.freund.xgen.cartridge.templates

import de.freund.xgen.cartridge.metafacade.*
		
abstract class ReadmeMdTplBase {
	

	def generate(NodeMetafacade nodeMetafacade) '''
		«doGenerate(nodeMetafacade)»
	'''

	def String doGenerate(NodeMetafacade nodeMetafacade)
}

File 25 : /myProject/src-gen/de/freund/xgen/cartridge/templates/RoleBaseTplBase.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.templates.TemplateBaseTpl
 */
package de.freund.xgen.cartridge.templates

import de.freund.xgen.cartridge.metafacade.*
		
abstract class RoleBaseTplBase {
	

	def generate(NodeMetafacade nodeMetafacade) '''
		«doGenerate(nodeMetafacade)»
	'''

	def String doGenerate(NodeMetafacade nodeMetafacade)
}

File 26 : /myProject/src-gen/de/freund/xgen/cartridge/templates/RoleTplBase.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.templates.TemplateBaseTpl
 */
package de.freund.xgen.cartridge.templates

import de.freund.xgen.cartridge.metafacade.*
		
abstract class RoleTplBase {
	

	def generate(NodeMetafacade nodeMetafacade) '''
		«doGenerate(nodeMetafacade)»
	'''

	def String doGenerate(NodeMetafacade nodeMetafacade)
}

File 27 : /myProject/src-gen/de/freund/xgen/cartridge/templates/SitePpTplBase.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.templates.TemplateBaseTpl
 */
package de.freund.xgen.cartridge.templates

import de.freund.xgen.cartridge.metafacade.*
		
abstract class SitePpTplBase {
	

	def generate(NodeMetafacade nodeMetafacade) '''
		«doGenerate(nodeMetafacade)»
	'''

	def String doGenerate(NodeMetafacade nodeMetafacade)
}

File 28 : /myProject/src-gen/de/freund/xgen/cartridge/templates/VagrantfileTplBase.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.templates.TemplateBaseTpl
 */
package de.freund.xgen.cartridge.templates

import de.freund.xgen.cartridge.metafacade.*
		
abstract class VagrantfileTplBase {
	

	def generate(NodeMetafacade nodeMetafacade) '''
		«doGenerate(nodeMetafacade)»
	'''

	def String doGenerate(NodeMetafacade nodeMetafacade)
}

File 29 : /myProject/src-gen/de/freund/xgen/cartridge/util/PuppetCartridgeOutputConfigurationProvider.java

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.generator.CartridgeOutputConfigurationProviderTpl
 */
package de.freund.xgen.cartridge.util;

import java.util.Set;

import org.eclipse.xtext.generator.OutputConfiguration;
import org.eclipse.xtext.generator.OutputConfigurationProvider;

/**
 * Configuration of output locations and settings for code generation.
 *
 * @author Sebastian Freund<seba1403@googlemail.com>
 *
 */
public class PuppetCartridgeOutputConfigurationProvider extends
		OutputConfigurationProvider {
	Set<OutputConfiguration> outputs = super.getOutputConfigurations();

	public static String OUTPUTCONFIG_SITE_BASE = "siteBase";
	public static String OUTPUTCONFIG_MANIFESTS = "manifests";
	public static String OUTPUTCONFIG_ROLE_MANIFESTS = "roleManifests";
	public static String OUTPUTCONFIG_PROFILE_MANIFESTS = "profileManifests";

	@Override
	public Set<OutputConfiguration> getOutputConfigurations() {
	//
	OutputConfiguration siteBaseOutput = new OutputConfiguration(
		OUTPUTCONFIG_SITE_BASE);
	siteBaseOutput.setDescription("siteBase output configuraton");
	siteBaseOutput.setOverrideExistingResources(false);
					
	outputs.add(siteBaseOutput);
	
	//
	OutputConfiguration manifestsOutput = new OutputConfiguration(
		OUTPUTCONFIG_MANIFESTS);
	manifestsOutput.setDescription("manifests output configuraton");
	manifestsOutput.setOverrideExistingResources(true);
					
	outputs.add(manifestsOutput);
	
	//
	OutputConfiguration roleManifestsOutput = new OutputConfiguration(
		OUTPUTCONFIG_ROLE_MANIFESTS);
	roleManifestsOutput.setDescription("roleManifests output configuraton");
	roleManifestsOutput.setOverrideExistingResources(true);
					
	outputs.add(roleManifestsOutput);
	
	//
	OutputConfiguration profileManifestsOutput = new OutputConfiguration(
		OUTPUTCONFIG_PROFILE_MANIFESTS);
	profileManifestsOutput.setDescription("profileManifests output configuraton");
	profileManifestsOutput.setOverrideExistingResources(true);
					
	outputs.add(profileManifestsOutput);
	
		return outputs;
	}
}

File 30 : /myProject/src-gen/de/freund/xgen/cartridge/util/PuppetCartridgeProjectProperties.xtend

/**
 * Generated by Xgen. !!! DO NOT EDIT BY HAND IF THIS FILE WAS GENERATED TO A DERIVED DIRECTORY !!!
 * Xtend Template: org.xmdlab.cartridge.generator.dsl.templates.namespace.CartridgeProjectPropertiesTpl
 */
package de.freund.xgen.cartridge.util;

import com.typesafe.config.Config
import com.typesafe.config.ConfigFactory
import java.io.File
import java.io.IOException
import org.eclipse.core.resources.ResourcesPlugin
import org.eclipse.core.runtime.Path
import org.eclipse.emf.common.util.URI
import java.util.Map

/**
 * The org.xmdlab.cartridge.generator.dsl.templates.namespace.CartridgeProjectPropertiesTpl
 *
 * @author Sebastian Freund<seba1403@googlemail.com>
 *
 */
@com.google.inject.Singleton
public class PuppetCartridgeProjectProperties {

	var Config _conf
	var URI modelUri

	def String getPropertyValue(String key) {
		getConf().getString(key)
	}

	def Config getConf() {
		if (_conf == null || _conf.entrySet().size() == 0) {
			_conf = ConfigFactory.parseFile(getConfigFile())
		}
		
		val Map<String, String> defaults = newHashMap()
		defaults.put("vmBox", "teamserver-precise64")
		
		_conf.withFallback(ConfigFactory.parseMap(defaults))

		return _conf
	}
	
	def File getConfigFile() {
		var String result = null

		val URI confUri = modelUri.trimSegments(1).appendSegment(
			modelUri.lastSegment().replace(".puppet", ".properties"))

		if (confUri.isFile()) {
			result = confUri.toFileString()
		} else if (confUri.isPlatformResource()) {
			val String propertiesWorkspacePath = confUri.devicePath().replace("/resource", "")

			try {
				result = ResourcesPlugin::getWorkspace().getRoot().getFile(new Path(propertiesWorkspacePath)).
					getLocation().toFile().getCanonicalPath()
			} catch (IOException e) {
				System.out.println(e.toString())
				e.printStackTrace()
			}
		} else {
			result = new File(URI.createFileURI(confUri.segment(0)).toFileString()).getAbsolutePath()
		}

		return new File(result)
	}
	
	def setModelUri(URI modelUri) {
		this.modelUri = modelUri
	}
	
	// Properties for group vagrant
	def String getVmBox() {
		return getConf().getString("vagrant.vmBox")
	}
}

